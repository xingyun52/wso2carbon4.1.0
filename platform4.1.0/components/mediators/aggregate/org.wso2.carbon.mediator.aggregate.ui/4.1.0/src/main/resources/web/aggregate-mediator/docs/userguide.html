<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<!--
 ~ Copyright (c) 2009, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~ http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 -->
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"/>
    <title>Aggregate Mediator - User Guide</title>
    <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all"/>
</head>
<body>
<div id="middle">
<h1>Aggregate Mediator</h1>
<p>
The aggregate mediator implements the Message Aggregator EIP and will
aggregate the messages or responses for splitted messages using either
the clone or iterate mediators. At the same time it can aggregate
messages on the presence of matching elements specified by the
correlateOn XPATH expression. Aggregate will collect the messages
coming into it until the messages collected on the aggregation
satisfies the complete condition. The completion condition can specify
a minimum or maximum number of messages to be collected, or a timeout
value in seconds, after which the aggregation terminates. On completion
of the aggregation it will merge all of the collected messages and
invoke the onComplete sequence on it. The merged message would be
created using the XPath expression specified by the attribute
'expression' on the 'onComplete' element.
</p>
<h3>Adding an Aggregate mediator</h3>
As shown in figure 1,
<ol>
<li>Click <span style="font-weight: bold;">Add
Child</span></li>
<li>Go to <span style="font-weight: bold;">Advanced</span>
and click <span style="font-weight: bold;">Aggregate</span></li>
</ol>
<div class="image">
<img src="images/add-aggregate.png" alt=""/>
<p>Figure 1: Adding an Aggregate mediator</p>
</div>
<h3>Configuring aggregator specific options</h3>
After adding an aggregate mediator, clicking on it will open up the
aggregator specific options below the sequence editor. Figure 2 shows
all the aggregator specific options.<br/>
<br/>
<div class="image">
<img src="images/aggregator-options.png" alt=""/>
<p>Figure 2: Aggregator specific options
</p>
</div>
Aggregate mediator field descriptions,<br/>
<br/>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td style="font-weight: bold;" width="250">Field name</td>
<td style="font-weight: bold;">Description</td>
</tr>
<tr>
<td>Aggregate ID</td>
<td>This optional attribute can be used to aggregate only responses for splitted messages that
are created by a specific clone/iterate mediator. Aggregate ID should be same as the ID of the
corresponding clone/iterate mediator that creates splitted messages. This is particularly useful
when aggregating responses of messages that are created using nested clone/iterate mediators.
</td>
</tr>
<tr>
<td>Aggregation Expression</td>
<td>An XPath expression specifying based on
which elements to aggregate. Set of messages that's taken for
aggregation is determined through <span style="font-weight: bold;">Correlation
Expression</span>.</td>
</tr>
<tr>
<td>Completion Timeout</td>
<td>Time that the aggregator waits for messages.</td>
</tr>
<tr>
<td>Completion Max-messages</td>
<td>Maximum number of messages that can exist in an
aggregation.</td>
</tr>
<tr>
<td>Completion Min-messages</td>
<td>Minimum number of messages required for the aggregation
to complete.</td>
</tr>
<tr>
<td>Correlation
Expression</td>
<td>An XPath expression specifying the pattern messages
will
be collected for aggregation. Specific aggregation condition will be
set through <span style="font-weight: bold;">Aggregation
Expression</span>.</td>
</tr>
</tbody>
</table>
<br/>
<br/>
</div>
</body></html>
