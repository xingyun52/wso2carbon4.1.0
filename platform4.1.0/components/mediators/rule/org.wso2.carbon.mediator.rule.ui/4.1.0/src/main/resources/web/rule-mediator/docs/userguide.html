<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <!--
    ~ Copyright (c) 2009, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
    ~
    ~ Licensed under the Apache License, Version 2.0 (the "License");
    ~ you may not use this file except in compliance with the License.
    ~ You may obtain a copy of the License at
    ~
    ~ http://www.apache.org/licenses/LICENSE-2.0
    ~
    ~ Unless required by applicable law or agreed to in writing, software
    ~ distributed under the License is distributed on an "AS IS" BASIS,
    ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    ~ See the License for the specific language governing permissions and
    ~ limitations under the License.
    -->
    <meta content="text/html; charset=iso-8859-1" http-equiv="content-type"/>
    <title>Rule Mediator - User Guide</title>
    <link href="../../admin/css/documentation.css" rel="stylesheet"
          type="text/css" media="all"/>
</head>

<body>
<h1>Rule Mediator</h1>

<p>Rule mediator is to integrate WSO2 rules component to the WSO2 ESB in order
    to bring the capability of rules to define dynamic integration decisions.
    Figure 1 shows a Rule Mediator UI. </p>
<img src="images/rule_mediator_1.JPG" alt="Rule"/>

<p><strong>Figure1: Rule Mediator</strong></p>

<p></p>

<p>Each of configuration elements is described in following section.</p>

<h4>RuleSet</h4>

<p>The source is the only mandatory element of the ruleset. However, the
    properties required for the creation of the ruleset can also be specified
    within ruleset. The key attribute is a registry key, which is to lookup the
    rule script from the registry if the rule script is in the registry. The rule
    set can be given as a child node of source elemenent. If the rule set is
    non-XML, you may need to wrap it with a CDATA section inside a XML tag ex:
    &lt;X&gt;&lt;![CDATA[ native code]]&gt;&lt;/X&gt;</p>

<p>Note : The key or in-lined rule script must be defined. Otherwise, the rule
    mediator configuration is invalid. </p>

<p>It is possible to exists properties for rules set creation and there is add
    property options for each.</p>

<p>Example Usage: When using Drool XML language (.xml) for rule script, it is
    needed to explicitly specify it .This can be done using attribute named
    'source' and value 'xml'. This is Drools specific property and you can refer
    Drools documentation for more information. </p>
<pre>  &lt;ruleSet&gt;
      &lt;creation&gt;
          &lt;property name="source" value="xml"/&gt;
      &lt;/creation&gt;
  &lt;/ruleSet&gt;</pre>

<h4 id="RuleSessio">RuleSession</h4>

<p>Rule Session specify the stateful or stateless behavior of the rule engine.
    If this has value 'stateful';, then the rule engine will execute
    rules in a stateful manner, for any other value , it assumes as stateless.
    There are optional properties, which are used when creating the rule session.
    Rule session is optional and the default one is stateful.</p>

<h4>Fact / Result</h4>

<p>Fatcs defines what are the facts that should injected to Rule Engine in
    order to fire rules whereas results describes what should do with return values
    form the rule execution.</p>

<h4>Adding Fact / Result</h4>

<p>Figure 2 shows a one senario of addting fact / result </p>

<p><img alt="Rule Mediator Inputs" src="images/rule_mediator_input.JPG"/></p>

<p>Figure 2 Facts/ of the Rule Mediator </p>

<p></p>

<p><strong>Type :</strong> This is the only mandatory field. Fact selector can
    be used to specify any registered fact types. There are a few built in types
    such as Message, Context, Map, POJO and Mediator and there are samples using
    these. Using the <strong>rule-component.conf</strong>, you can register new
    types along with adapters, which are responsible for formulating specified
    types from the data. If there is no registered adapter for a given type, then,
    we assume the given type as a valid java class name and uses POJO adapter to
    formulate the POJO instance whose class is the given type.</p>

<p><strong>Name :</strong> The name of the fact </p>

<p><strong>Fact Source Type :</strong> Can be literal, a registry key or an
    expression <em></em></p>

<p><strong>Value :</strong> The registry or Message context key .This is used
    for getting data from either registry or message context </p>

<p><strong>Registry Browser :</strong> If the key is registry resource, the
    browser to select the resource.</p>

<p><strong>NS Editor</strong> : You can click this link to add namespaces if
    you are providing an expression. You will be provided another panel named
    'Namespace Editor' where you can provide any number of namespace prefixes and
    url</p>

<p><strong>Action</strong> : Delete the fact / result </p>

<h4>Adding Properties</h4>

<p>Adding properties option is in RuleSet and RuleSession. Figure 3 shows UI on
    adding property. </p>

<p><img alt="Property Adding" src="images/rule_mediator_property.JPG"/></p>

<p>Figure3: Rule Mediator Properties</p>

<p><strong>Name</strong>: Name for the property</p>

<p><strong>Value</strong>: The type of the property value.</p>

<p><strong>Action</strong>: Delete the property</p>

<p></p>
</body>
</html>
