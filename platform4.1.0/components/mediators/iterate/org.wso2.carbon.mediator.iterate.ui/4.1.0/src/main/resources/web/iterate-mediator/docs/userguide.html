<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<!--
 ~ Copyright (c) 2009, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~ http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 -->
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"/>
    <title>Iterate Mediator - User Guide</title>
    <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all"/>
</head>

<body>
<h1>Iterate Mediator</h1>
<p>
The iterate mediator implements an EIP (Enterprise Integration Pattern) -similar to the clone mediator and will split the message
into number of different messages derived from the parent message by finding matching elements for the XPath expression specified. 
New messages will be created for each and every matching element and processed in parallel (default behavior)
using either the specified sequence or endpoint. Created messages can also be set to process sequentially
by setting the optional 'sequential' attribute to 'true'. The original message can be continued or dropped depending on the boolean value of the optional 'continueParent' attribute,
in the same way as in the clone mediator. The 'preservePayload' attribute 
specifies if the original message should be used as a template when creating the splitted messages, and defaults to 'false', in 
which case the splitted messages would contain the split elements as the SOAP body.
The optional 'id' attribute can be used to identify the iterator which created a particular splitted message
when nested iterate mediators are used. This is particularly useful when aggregating responses of
messages that are created using nested iterate mediators.
</p>

<img src="images/iterate_mediator_screenshot.png"/>
<p><strong>Figure1: Iterate Mediator</strong></p>

Iterate Mediator can be configured with the following options.

<ul>
<li>
Iterate ID: (Optional) This can be used to identify messages created by this iterate mediator, useful
when nested iterate mediators are used.
</li>
<li>
Sequential Mediation: (True/False), Specify whether splitted messages should be processed sequentially
or in parallel. Default value is 'false' (parallel processing).
</li>
<li>
Continue Parent: (True/False), Specify whether the original message should be continued or dropped, this is default to 'false'.
</li>
<li>
Preserve Payload: (True/False), Specify whether the original message should be used as a template when 
creating the splitted messages or not, this is default to 'false'.
</li>
<li>
Iterate Expression: Xpath expression that matches the elements which you want to split the message from. You can specify
the namespaces that you used in the xpath expression by clicking the namespace link in the right hand side.
</li>
<li>
Attach Path: (Optional), You can specify an xpath expression for elements that the splitted elements 
(as expressed in Iterate expression) are attached to, to form new messages</li>
</ul>
</body>
</html>
