<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<!--
 ~ Copyright (c) 2009, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~ http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 -->
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"/>
    <title>XQuery Mediator - User Guide</title>
    <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all"/>
</head>

<body>
<h1>XQuery Mediator</h1>
<p>
The XQuery mediator can be used to perform an XQuery transformation. The 'key' attribute specifies the XQuery transformation, 
and the optional 'target' attribute specifies the node of the message that should be transformed. This defaults to the first 
child of the SOAP body of the payload. The 'Variables for the XQuery mediator' define values/expressions that could be bound to the dynamic context 
of the XQuery engine in order to access those variables through the XQuery script. </p>

<img src="images/xquery_mediator_screenshot.jpg"/>
<p><strong>Figure1: XQuery Mediator</strong></p>

<ul>
<li>
Key: The key that represent the xquery transformation.
</li>
<li>
Target: (optional) Specify the node of the message that should be transformed using an xpath expression. ( default to the first child of the SOAP body )
The namespace prefixes used in the expression can be defined by clicking the namespaces link in front of the 'Target' input field.
</li>
</ul>
<p>
Variables for the XQuery Mediator: Defines values/expressions that could be bound to the dynamic context 
of the XQuery engine in order to access those variables through the XQuery script. 
</p>

<img src="images/xquery_mediator_variables.jpg"/>
<p><strong>Figure1: XQuery Mediator - Adding Variables</strong></p>

You have the following option in a variable.
<ul>
<li>
Variable Type: The 'type' of the variable must be a valid type defined by the JSR-000225 (XQJ API).

<p>
The supported types are:
</p>

<ol>
<li>XQItemType.XQBASETYPE_INT-&gt;INT</li>
<li>XQItemType.XQBASETYPE_INTEGER-&gt;INTEGER</li>
<li>XQItemType.XQBASETYPE_BOOLEAN-&gt;BOOLEAN</li>
<li>XQItemType.XQBASETYPE_BYTE-&gt;BYTE</li>
<li>XQItemType.XQBASETYPE_DOUBLE-&gt;DOUBLE</li>
<li>XQItemType.XQBASETYPE_SHORT-&gt;SHORT</li>
<li>XQItemType.XQBASETYPE_LONG-&gt;LONG</li>
<li>XQItemType.XQBASETYPE_FLOAT-&gt;FLOAT</li>
<li>XQItemType.XQBASETYPE_STRING-&gt;STRING</li>
<li>XQItemType.XQITEMKIND_DOCUMENT-&gt;DOCUMENT</li>
<li>XQItemType.XQITEMKIND_DOCUMENT_ELEMENT-&gt;DOCUMENT_ELEMENT</li>
<li>XQItemType.XQITEMKIND_ELEMENT-&gt;ELEMENT</li>
</ol>

</li>
<li>
Variable Name: The name of the variable should correspond to the name of variable declaration in the XQuery script.
</li>
<li>
Value Type: Whether the value of the variable is a static value or an expession.
</li>
<li>
Value/Expression: Static value or the expression.
</li>
<li>
Registry Key: Key, if the value is retrieved from the registry.
</li>
<li>
NSEditor: Defines the namespaces for the prefixes used in the xpath query.
</li>
<li>
Action: Delete the variable.
</li>
</ul>
</body>
</html>
