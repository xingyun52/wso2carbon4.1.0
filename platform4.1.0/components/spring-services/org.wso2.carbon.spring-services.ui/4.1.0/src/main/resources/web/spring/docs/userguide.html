<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
 ~ Copyright (c) 2005-2010, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ WSO2 Inc. licenses this file to you under the Apache License,
 ~ Version 2.0 (the "License"); you may not use this file except
 ~ in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~    http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing,
 ~ software distributed under the License is distributed on an
 ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 ~ KIND, either express or implied.  See the License for the
 ~ specific language governing permissions and limitations
 ~ under the License.
 -->
<html><head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"></meta>
  <title>Spring Services - User Guide</title>
  <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all" />
</head>
<body>
<h1>Deploying Spring Services</h1>

<p>The WSO2 Web service Application Server (WSAS) provides a tool to simply
expose a Spring bean as a Web service. All you have to do is provide a Spring
context .xml file and a .jar file that contains the bean classes specified in
the Spring context .xml file. </p>

<h2>Writing a Simple Spring Bean</h2>

<p>The following is a simple example of a Spring context .xml.</p>

<p>Specify a particular bean with an ID,and a class name which can be found
in the .jar file.</p>

<p><strong>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</strong></p>

<p><strong>&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
"http://www.springframework.org/dtd/spring-beans.dtd"&gt;</strong></p>

<p><strong>&lt;beans&gt;</strong><strong>&lt;bean id="<span style="color: rgb(255, 0, 102);"><span style="color: rgb(0, 0, 0);">SimpleEchoBean</span></span>" class="<span style="color: rgb(255, 0, 102);"><span style="color: rgb(0, 0, 0);">org.wso2.test.EchoBean</span></span>"&gt;&lt;/bean&gt;</strong></p>

<p><strong>&lt;/beans&gt;</strong></p>

<p></p>

<p>The Echo Bean for this example is given below. It can contain any type of
service implementation.</p>

<p></p>

<p><strong>package org.wso2.test;</strong></p>

<p><strong>/*** Example EchoBean***/</strong></p>

<p><strong>public class EchoBean {</strong></p>

<p><strong>public String echoString(String input) {</strong></p>

<p><strong>return input;</strong></p>

<p><strong>}</strong></p>

<p><strong>public int echoInt(int input) {</strong></p>

<p><strong>return input;</strong></p>

<p><strong>}</strong></p>

<p><strong>}</strong></p>

<p></p>

<h2>Adding a Spring Service to the Server</h2>

<p>The Add Spring Service feature is used to upload the spring context.xml
file and the .jar file with the bean classes.</p>

<p><img alt="" src="../images/upload.png" style="width: 710px; height: 230px;"/></p>

<p>Figure 1: Adding a spring service </p>
<ol>
  <li>In the navigator, under Manage/Service, click <strong>Spring
    Service</strong>. The Add <em><strong>Spring Service</strong></em> page
    appears.</li>
  <li>Provide the hierarchical path of the service. This is optional. If you want to manage
      services separately, specifying a heirarchy is important. This allows you to customise
      your service EPR as you wish. And also it allows you to manage multiple versions of the
      same service changing only the business logic.
      <p><strong>Example:</strong> Consider a service "SpringTest"</p>
      <p>If no service hierarchy -> EPR is ../services/SpringTest</p>
      <p>With service hierarchy foo/bar/1.0.0 -> EPR is ../services/foo/bar/1.0.0/SpringTest</p>
  </li>
  <li>Click <strong>Browse</strong>, and select the Spring context .xml file,
    and the Spring beans .jar file respectively.</li>
  <li>Click <strong>Upload</strong>. 
    If the files are correct, the <em><strong>Select Beans to
    Deploy</strong></em> page appears. If the beans specified in the spring
    context .xml file are found in the .jar file, they will be displayed on
    this page.</li>
  <li>Select the <strong>Include</strong> check box for the beans you want to
    expose as web services.</li>
  <li>Click <strong>Generate</strong>.
    The services will appear on the <em><strong>Service List</strong></em>
    page. Several options are available to test your service and manage the
    quality of your service.
  </li>
</ol>

<p><img alt="" src="../images/beans.png" style="width: 450px; height: 263px;"/></p>

<p>Figure 2: Select the required bean to deploy</p>

<p><strong>Note</strong>: If your service implementation depends on any third
party libraries, you can copy those into CARBON_HOME/lib/extensions directory
and restart the server to get your service working.</p>
</body></html>
