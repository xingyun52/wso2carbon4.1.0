<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
 ~ Copyright (c) 2005-2010, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ WSO2 Inc. licenses this file to you under the Apache License,
 ~ Version 2.0 (the "License"); you may not use this file except
 ~ in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~    http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing,
 ~ software distributed under the License is distributed on an
 ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 ~ KIND, either express or implied.  See the License for the
 ~ specific language governing permissions and limitations
 ~ under the License.
 -->
<html><head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"></meta>
  <title>Response Caching - User Guide</title></head>
  <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all" />
<body>
<h1>Response Caching</h1>

<p>WSO2 Carbon provides a caching tool that
is used to cache responses for requests that are identical, thereby enhancing
the response time for subsequent requests. When caching is enabled,
subsequent requests with same hash value as the previous request whose
response was cached, will be served with the same cached response. Caching
can be enabled at three levels.</p>
<ol>
  <li>Service level:
    If caching is engaged at service level, all the responses that are generated by
    all the operations of that particular service will be cached.</li>
  <li>Global level:
    Global level engagement of caching will apply caching for all the
    messages coming into a hosted server instance. All the responses from all
    the services will be cached. </li>
  <li>Operation level: 
    If engaged at operation level, only those responses from that particular
    operation of a given service will be cached.</li>
</ol>

<h2>Adding Response Caching to the Service</h2>

<p>Adding response caching reduces the overhead of XML processing or object
copying. It helps clients to participate transparently in the existing Web
services community.</p>
The caching option is disabled by default, therefore it must be enabled.   
<ol>
  <li>In the navigator, under Manage/Service, click <strong>List</strong>.
    The <em><strong>Deployed Services</strong></em> page appears.</li>
  <li>Click the service for which you want to add caching. The
    <em><strong>Service Dashboard</strong></em> page appears.</li>
  <li>In the Quality of Service Configuration panel, click <strong>Response
    Caching</strong>. The <em><strong>Caching Configuration</strong></em>
    page appears.</li>
  <li>In the <strong>Enable Caching</strong> list, click
    <strong>Yes</strong>. The last saved configuration or the default
    configuration (if it is the first time) for caching will be
  displayed.</li>
  <li>Modify the configuration as required, and click <strong>Finish</strong>
    . Caching will be engaged for that particular service globally.</li>
</ol>

<p><img alt="" src="./images/caching%20configuration.JPG" height="219" width="686"/></p>

<p>Figure 1: Configuration for Response Caching</p>

<p>
</p>

<p><a href="#Fields">Field Description</a></p>

<p></p>

<h3><a name="Fields" id="Fields">Fields in Wizard</a></h3>

<table style="width: 100%;" border="1">
  <caption></caption>
  <tbody>
    <tr>
      <td>Field Name</td>
      <td>Description</td>
    </tr>
    <tr>
      <td>Hash Generator</td>
      <td>This specifies the fully qualified class name of the hash value
        generator. This class implements
        the org.wso2.caching.digest.DigestGenerator interface. It is
        responsible for generating a Hash value for each request message, so
        that a matching response message can be located from the cache. The
        default is org.wso2.caching.digest.DOMHASHGenerator. You can
        implement your own Hash generator class and use it with the WSO2
        Carbon based product. However, the default hash generator should be good enough for
        general use.</td>
    </tr>
    <tr>
      <td>Timeout </td>
      <td>This is the time period, in milliseconds, that a cached response is
        kept in memory. The counting starts from the time the first request
        is received. Any request received after the counter has started and
        is within the Timeout period, is served with the response cached upon
        receiving the first request. Once the Timeout expires, the cache will
        be updated with the response generated for the first request that was
        received after the expiry.</td>
    </tr>
    <tr>
      <td>Maximum Cache Size </td>
      <td>This holds the maximum number of response messages that will be cached.
        If the maximum number of responses are already cached and none of the
        cached responses' Timeouts have expired, then future responses are
        not cached until this memory is free enough to accommodate caching 
        a new response.</td>
    </tr>
    <tr>
      <td>Maximum Message Size</td>
      <td>The response message that is cached. Response messages larger than
        this (in size) are not cached. Caching is an expensive operation for
        larger messages, especially given the amount of memory required.
        Therefore this value should be set considering the performance and
        resource trade-offs.</td>
    </tr>
  </tbody>
</table>

<p><span style="font-weight: bold;">Note</span>:</p>
<ul>
  <li>It is advised that you consider the dynamic nature of your services
    before you enable caching globally. For example, an operation that is
    supposed to generate random numbers would not benefit from caching
    previous responses, because it is supposed to generate a unique response
    for each invocation. </li>
  <li>WSO2 Carbon based products support configuring caching at service level
    and global level. If you want to engage the caching capability at
    operational level, you have to edit the configuration file of the service
    manually and engage it at operation level.</li>
</ul>
<ol>
</ol>
</body></html>
