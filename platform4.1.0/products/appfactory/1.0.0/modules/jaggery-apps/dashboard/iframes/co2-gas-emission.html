<html>
<link rel="stylesheet" href="js/dojo/dijit/themes/claro/claro.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="javascript">
    dojoConfig = {parseOnLoad:true}
</script>
<script src='../../js/dojo/dojo/dojo.js'></script>
<script type="javascript">
    $(function () {
        var obj = [
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"17.9583101099744", "decimal":"1", "date":"2008"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"18.5290796680305", "decimal":"1", "date":"2007"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"18.4823957954649", "decimal":"1", "date":"2006"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"18.934157928638", "decimal":"1", "date":"2005"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.0017045183383", "decimal":"1", "date":"2004"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"18.86109880008", "decimal":"1", "date":"2003"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"18.9059110062031", "decimal":"1", "date":"2002"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"18.9140917086916", "decimal":"1", "date":"2001"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.5362642226643", "decimal":"1", "date":"2000"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.8113144352064", "decimal":"1", "date":"1999"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.7534843032909", "decimal":"1", "date":"1998"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"20.1768720847072", "decimal":"1", "date":"1997"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.8353046578617", "decimal":"1", "date":"1996"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.6710523175028", "decimal":"1", "date":"1995"},
            {"indicator":{"id":"EN.ATM.CO2E.PC", "value":"CO2 emissions (metric tons per capita)"}, "country":{"id":"US", "value":"United States"}, "value":"19.865678374619", "decimal":"1", "date":"1994"}
        ];
        var c = null;


        //obj = data[1];
        var coords = [];

        if (!c) {
            require(["dojox/charting/Chart", "dojox/charting/axis2d/Default", "dojox/charting/plot2d/StackedAreas", "dojox/charting/themes/Wetland" , "dojo/ready"],
                    function (Chart, Default, StackedAreas, Wetland, ready) {
                        ready(function () {
                            c = new Chart("chartOne");
                            c.addPlot("default", {type:StackedAreas, tension:10})
                                    .addAxis("x", {fixLower:"major", fixUpper:"major"})
                                    .addAxis("y", {vertical:true, fixLower:"major", fixUpper:"major", min:0})
                                    .setTheme(Wetland);

                            for (i in obj) {
                                coords.push({x:parseInt(obj[i].date), y:parseInt(obj[i].value)});
                            }

                            coords.reverse();
                            c.addSeries("Series A", coords).render();
                        });
                    });
        } else {
            for (i in obj) {
                coords.push({x:parseInt(obj[i].date), y:parseInt(obj[i].value)});
            }

            coords.reverse();
            c.updateSeries("Series A", coords).render();

        }

    });
</script>
<h2>CO2 Gas Emission</h2>

<div id="chartOne" style="width: 400px; height: 240px; margin: 30px auto 0px auto;"></div>
</html>